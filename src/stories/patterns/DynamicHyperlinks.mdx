import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Patterns/Dynamic hyperlinks" />

# Dynamic hyperlinks

A pattern that layers inferred semantic connections onto text content, transforming any word or phrase into a contextual link based on algorithmic similarity analysis across a document corpus.

## Description

Dynamic hyperlinks exemplify [soft data](../?path=/docs/foundations-data--docs#hard-and-soft-data) layering over hard content.
While explicit hyperlinks and [references](../?path=/docs/primitives-reference-reference--docs) represent author-defined, deterministic connections,
dynamic hyperlinks add a configurable inference layer that discovers semantic relationships algorithmically.

When users select text, the system searches across available content to surface contextually-
ranked related mentions, presenting these inferred connections with appropriate visual distinction and confidence indicators.
Users control the visibility and sensitivity of this soft layer through toggles and threshold adjustments.

This pattern shifts navigation from following predetermined paths to multidimensional exploration, scaling connection-discovery through automation whilst preserving explicit links where they exist.

## Core characteristics

- **Soft data layer**: Inferred connections computed algorithmically, distinct from explicit hard data
- **On-demand generation**: Links emerge contextually rather than existing statically
- **Visual density mapping**: Connection strength visualized through heatmaps or highlighting
- **Semantic similarity**: Content relationships determined algorithmically (n-gram overlap, embedding similarity)
- **Reader agency**: Users decide which connections to explore rather than following predetermined paths
- **Contextual ranking**: Related content sorted by relevance to selected text
- **Configurability**: Users control layer visibility, sensitivity thresholds, and algorithm parameters

## Data layering

Following the [Data foundation](../?path=/docs/foundations-data--docs) principles:

**Hard layer** (explicit connections):
- Author-created hyperlinks
- [References](../?path=/docs/primitives-reference-reference--docs) to typed entities
- Manual cross-references
- Visual treatment: Standard link styling, solid underlines

**Soft layer** (inferred connections):
- Algorithmically-discovered semantic relationships
- Computed similarity scores (confidence indicators)
- Suggested related content
- Visual treatment: Heatmap highlighting, dashed underlines, muted colors

**User control**:
- Toggle heatmap on/off (Ctrl+L or similar)
- Adjust similarity threshold (0.0-1.0 scale)
- Filter by content type or source
- Accept suggestions to promote to hard layer (bookmark related content)

## Implementation patterns

**Heatmap overlay** shows connection density:
```html
<!-- Visual feedback indicates link-rich areas -->
<pp-hyperlink-heatmap>
  <p>Text with varying connection density...</p>
</pp-hyperlink-heatmap>
```

**Selection-triggered popup** displays related content:
```html
<!-- Selecting text surfaces relevant mentions -->
<pp-connection-popup
  position="auto"
  max-results="10"
  min-similarity="0.2">
</pp-connection-popup>
```

**Orchestration component** coordinates the experience:
```html
<!-- Wrapper manages heatmap and popup interaction -->
<pp-hyperlink-text>
  <article>Document content...</article>
</pp-hyperlink-text>
```

## Similarity algorithms

**N-gram matching** (simple, fast):
- Extract overlapping word sequences (3-4 words)
- Calculate Jaccard similarity: `|A ∩ B| / |A ∪ B|`
- Efficient for in-browser computation

**Embedding similarity** (semantic, slower):
- Generate vector representations of text segments
- Compute cosine similarity between vectors
- Captures meaning beyond surface-level word overlap

**Hybrid approach**:
- Fast n-gram filtering for initial candidates
- Semantic ranking for top results
- Balance between speed and accuracy

## Variants

### Functional variants

- **Always-on heatmap**: Continuous visualization of connection density
- **Hover-activated**: Heatmap appears on pointer hover
- **Toggle mode**: Keyboard shortcut enables/disables dynamic linking
- **Selection-only**: No heatmap, only popup on text selection

### Contextual variants

- **Single-document**: Links reference content within the same document
- **Multi-document**: Connections span across document collections
- **Cross-domain**: Links connect internal content with external sources
- **Temporal**: Historical versions or related timeline events surface

### Visual variants

- **Subtle highlighting**: Low-contrast background tints
- **Underline thickness**: Line weight indicates connection strength
- **Color gradients**: Hue/saturation maps to relevance scores
- **Annotation markers**: Inline indicators for high-density phrases

## States

### Heatmap states

- **Inactive**: No visual overlay, standard text display
- **Loading**: Computing connection density (show progress if slow)
- **Active**: Heatmap rendered with varying intensities
- **Updated**: Content changed, recomputing connections

### Popup states

- **Hidden**: No selection, popup dismissed
- **Loading**: Searching for related content
- **Results**: Related mentions displayed with snippets
- **Empty**: No relevant connections found above threshold
- **Error**: Search failed, show recovery options

## Accessibility

### Visual considerations

- Heatmap overlays must maintain sufficient contrast ratios
- Don't rely solely on color to convey connection density
- Respect `prefers-reduced-motion` for animations
- Ensure heatmap doesn't interfere with text readability

### Screen reader support

- Heatmap is decorative, hidden from assistive technology
- Popup content announced when triggered
- Connection count communicated via ARIA labels
- Keyboard shortcuts documented and discoverable

### Keyboard interaction

- Text selection via keyboard triggers popup
- Arrow keys navigate results list
- Enter/Return opens selected connection
- Escape dismisses popup
- Configurable shortcuts (e.g., Ctrl+L toggle mode)

## Decision tree

**Use dynamic hyperlinks when**:
- Content corpus is large and densely interconnected
- Discovering relationships is valuable to users
- Manual linking is impractical at scale
- Serendipitous discovery enhances the experience

**Avoid when**:
- Content is sparse or isolated
- Navigation paths are intentionally linear
- Performance constraints prevent real-time analysis
- User base unfamiliar with exploratory interfaces

**Choose algorithm based on**:
- N-gram matching: Speed critical, simple text, in-browser
- Embedding similarity: Semantic understanding needed, server-side
- Hybrid: Balance between performance and accuracy

## Related patterns

### Foundations

- [Data](../?path=/docs/foundations-data--docs) — Hard and soft data layering principles
- [Agency](../?path=/docs/foundations-agency--docs) — User control over inferred connections

### Similar soft data patterns

- [Focus and Context](../?path=/docs/patterns-focus-and-context--docs) — Inferred component relationships and deduced missing elements
- [Suggestion](../?path=/docs/patterns-suggestion--docs) — AI-suggested actions and connections

### Hard data counterparts

- [Reference](../?path=/docs/primitives-reference-reference--docs) — Explicit, typed entity linking (hard data layer)
- [Deep linking](../?path=/docs/primitives-deep-linking--docs) — Deterministic URL-based addressability

### Complementary patterns

- [Progressive disclosure](../?path=/docs/patterns-progressive-disclosure--docs) — Expand related content inline
- [Hover cards](../?path=/docs/components-hover-card--docs) — Preview linked content without navigation
- [Annotation](../?path=/docs/patterns-annotation--docs) — User-created markers (hard) and system-generated insights (soft)

## Resources

- [Hyperlink Maximalism](https://thesephist.com/posts/hyperlink/) — Linus Lee's original proposal
- [Notation](https://notation.linus.zone/) — Reference implementation using n-gram similarity
- [Semantic Text Networks](https://www.aaai.org/Papers/Symposia/Spring/2008/SS-08-07/SS08-07-005.pdf) — Academic research on document interconnection
- [Fluid Text Selection](https://arxiv.org/abs/2009.10979) — HCI research on selection-based interaction
