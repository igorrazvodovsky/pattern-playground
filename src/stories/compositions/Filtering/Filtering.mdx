import { Canvas, Story, Meta, Subtitle } from '@storybook/addon-docs/blocks';
import * as FilteringStories from './Filtering.stories.tsx';

<Meta of={ FilteringStories } />

{/* > ðŸ™‚ **Fun meter: 3/5**. Connecting stuff */}

# Filtering

Filtering allows an actor to add or remove [items](../?path=/docs/concepts-item--docs) from a displayed [collection](../?path=/docs/concepts-collection--docs) by turning on and off certain predefined attributes.

<Story of={ FilteringStories.Filtering } />

## Placement

- inline, popover, drawer...
- pairing with table header

## Navigation as filtering

...

## LLM-powered attribute search

When simple filter fails, the attribute search query is passed to LLM to find a match in the available attributes.

If that fails, users can delegate filtering to a [bot](../?path=/docs/patterns-bot--docs) via a TODO:task. Bot can have access to data beyond the attributes and values visible to the user.

### Flow 1

1. Enter a query that does not have a match in the available attributes
2. Create a task to handle it
3. Show "thinking..." placeholder
4. Replace it with a task result reference.

### Flow 2

1. Create a task outside filtering whose result can be used to filter the collection.
2. Follow steps 3-4 from Flow 1.

<Story of={ FilteringStories.LLMFilter } />

## Related patterns

### Precursors

- Typically placed in a [toolbar](../?path=/docs/compositions-toolbar--docs)
- Depends on [command menu](../?path=/docs/compositions-command-menu--docs) for the local search through attributes and values.


### Complementary

- [Grouping](../?path=/docs/compositions-browsing-sensemaking-grouping--docs)
- [Sorting](../?path=/docs/compositions-browsing-sensemaking-sorting--docs)
- Constrained natural language builder
- Rules
- Search

### Follow-ups

- [Data view](../?path=/docs/compositions-data-view--docs)

## Resources & references

- Patternfly / [Filters](https://www.patternfly.org/patterns/filters/design-guidelines)
- Gitlab Pajamas / [Filtering](https://design.gitlab.com/patterns/filtering/)
- IBM Carbon / [Filtering](https://carbondesignsystem.com/patterns/filtering/)
- Salesforce Lightning / [Rules, filters, and logic](https://www.lightningdesignsystem.com/2e1ef8501/p/58ff5f-rules-filters-and-logic/)