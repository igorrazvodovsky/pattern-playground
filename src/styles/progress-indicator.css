.stepper {
  --circle-size: 1.5rem;
  --spacing: 0.5rem;
}

.stepper__item {
  position: relative;
  display: flex;
  gap: 1rem;
  padding-bottom: 3rem;

  /* Fallback circle when no stepper__icon is present */
  &:not(:has(.stepper__icon)):before {
    content: "";
    flex: 0 0 var(--circle-size);
    height: var(--circle-size);
    border-radius: 50%;
    background-color: var(--c-neutral-100);
  }

  /* State-specific styling for fallback circles */
  &.stepper__item--done:not(:has(.stepper__icon)):before {
    background-color: var(--c-success-500);
  }

  &.stepper__item--current:not(:has(.stepper__icon)):before {
    background-color: var(--c-accent);
  }

  &.stepper__item--running:not(:has(.stepper__icon)):before {
    background-color: transparent;
  }

  &.stepper__item--next:not(:has(.stepper__icon)):before {
    background-color: transparent;
    border: 2px solid var(--c-neutral-100);
  }

  &:not(:last-child) {
    &:after {
      content: "";
      position: absolute;
      left: 0;
      top: calc(var(--circle-size) + var(--spacing));
      bottom: var(--spacing);
      z-index: -1;
      transform: translateX(calc(var(--circle-size) / 2));
      width: 2px;
      background-color: var(--c-neutral-100);
    }
  }
}

.stepper__icon {
  flex: 0 0 var(--circle-size);
  width: var(--circle-size);
  height: var(--circle-size);
  border-radius: 50%;
  background-color: var(--c-neutral-100);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--c-secondary);

  iconify-icon {
    font-size: 1rem;
  }
}

.stepper__item--current .stepper__icon {
  background-color: var(--c-accent);
  /* TODO: calculate color based on accent color */
  color: white;
}

.stepper__item--danger .stepper__icon {
  background-color: var(--c-danger-100);
  color: var(--c-danger-600);
}

.stepper__item--warning .stepper__icon {
  background-color: var(--c-warning-100);
  color: var(--c-warning-600);
}

.stepper__item--running .stepper__icon {
  background-color: transparent;
}

.stepper__item--next .stepper__icon {
  background-color: transparent;
  border: 2px solid var(--c-neutral-100);
}
